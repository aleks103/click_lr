jQuery.fn.extend({jCountdown:function(){var t=function(t){this._target=t,this._width=50,this._height=64,this._frame=1,this._totalFrames=15,this._fps=24,this._intervalId=-1,this._value=0,this.stop=function(){clearInterval(this._intervalId)},this.update=function(t){if(t){this.frame(1),this.stop();var i=this;this._intervalId=setInterval(function(){i.frame()==i.totalFrames()?(clearInterval(i._intervalId),i.onFinish()):i.frame(i.frame()+1)},Math.ceil(1e3/this.fps()))}else this.frame(this.totalFrames())},this.value=function(t,i){return void 0==t?this._value:(this._value=t,void this.update(i))},this.onFinish=function(){},this.destroy=function(){this.stop(),this._target=null},this.width=function(t){return void 0==t?this._width:void(this._width=t)},this.height=function(t){return void 0==t?this._height:void(this._height=t)},this.frame=function(t){if(void 0==t)return this._frame;this._frame=t;var t=-(9-this.value())*this.width(),i=-(this.frame()-1)*this.height();this._target.children(".text").css("background-position",t+"px "+i+"px")},this.totalFrames=function(t){return void 0==t?this._totalFrames:void(this._totalFrames=t)},this.fps=function(t){return void 0==t?this._fps:void(this._fps=t)},this.update(!1)},i=function(t){this._target=t,this._width=50,this._height=64,this._frame=1,this._totalFrames=15,this._fps=24,this._intervalId=-1,this._value=0,this.stop=function(){clearInterval(this._intervalId)},this.update=function(t){if(t){this.frame(1),this.stop();var i=this;this._intervalId=setInterval(function(){i.frame()==i.totalFrames()?(clearInterval(i._intervalId),i.onFinish()):i.frame(i.frame()+1)},Math.ceil(1e3/this.fps()))}else this.frame(this.totalFrames())},this.value=function(t,i){return void 0==t?this._value:(this._value=t,void this.update(i))},this.onFinish=function(){},this.destroy=function(){this.stop(),this._target=null},this.width=function(t){return void 0==t?this._width:void(this._width=t)},this.height=function(t){return void 0==t?this._height:void(this._height=t)},this.frame=function(t){return void 0==t?this._frame:(this._frame=t,t=-((1+this.value())*this.height())+Math.sin((this.frame()-1)/(this.totalFrames()-1)*Math.PI/2)*this.height(),void this._target.children(".text").css("background-position","0px "+t+"px"))},this.totalFrames=function(t){return void 0==t?this._totalFrames:void(this._totalFrames=t)},this.fps=function(t){return void 0==t?this._fps:void(this._fps=t)},this.update(!1)},s=function(t){this._target=t,this._height=this._width=60,this._frame=1,this._totalFrames=15,this._fps=24,this._intervalId=-1,this._value=0,this.stop=function(){clearInterval(this._intervalId)},this.update=function(t){if(t){this.frame(1),this.stop();var i=this;this._intervalId=setInterval(function(){i.frame()==i.totalFrames()?(clearInterval(i._intervalId),i.onFinish()):i.frame(i.frame()+1)},Math.ceil(1e3/this.fps()))}else this.frame(this.totalFrames())},this.value=function(t,i){return void 0==t?this._value:(this._value=t,void this.update(i))},this.onFinish=function(){},this.destroy=function(){this.stop(),this._target=null},this.width=function(t){return void 0==t?this._width:void(this._width=t)},this.height=function(t){return void 0==t?this._height:void(this._height=t)},this.frame=function(t){if(void 0==t)return this._frame;this._frame=t,t=this.value()+1,9<t&&(t=0);var i,s=this.frame()/this.totalFrames();.4<=s&&.6>=s?i=0:.4>=s?i=1-s/.4:.6<=s&&(i=(s-.6)/.4),t=-(.5<s?this.value():t)*this.height(),t-=3*(1-i),this._target.children(".text").css("background-position","0px "+t+"px").css("opacity",i),this._target.children(".cover").css("opacity",i)},this.totalFrames=function(t){return void 0==t?this._totalFrames:void(this._totalFrames=t)},this.fps=function(t){return void 0==t?this._fps:void(this._fps=t)},this.update(!1)},e=function(t){this._target=t,this._height=this._width=60,this._heightSmall=this._widthSmall=42,this._frame=1,this._totalFrames=15,this._fps=24,this._intervalId=-1,this._value=0,this.stop=function(){clearInterval(this._intervalId)},this.update=function(t){if(t){this.frame(1),this.stop();var i=this;this._intervalId=setInterval(function(){i.frame()==i.totalFrames()?(clearInterval(i._intervalId),i.onFinish()):i.frame(i.frame()+1)},Math.ceil(1e3/this.fps()))}else this.frame(this.totalFrames())},this.value=function(t,i){return void 0==t?this._value:(this._value=t,void this.update(i))},this.onFinish=function(){},this.destroy=function(){this.stop(),this._target=null},this.width=function(t){return void 0==t?this._width:void(this._width=t)},this.height=function(t){return void 0==t?this._height:void(this._height=t)},this.frame=function(t){if(void 0==t)return this._frame;this._frame=t;var t=-this.value()*this.height(),i=Math.sin((this.frame()-1)/(this.totalFrames()-1)*Math.PI/2);0<i&&.001>i?i=0:0>i&&-.001<i&&(i=0),this._target.children(".text").css("background-position","0px "+t+"px").css("opacity",i)},this.totalFrames=function(t){return void 0==t?this._totalFrames:void(this._totalFrames=t)},this.fps=function(t){return void 0==t?this._fps:void(this._fps=t)},this.update(!1)},h=function(){this._days=[],this._hours=[],this._minutes=[],this._seconds=[],this._tickId=-1,this._tickDelay=100,this._timeText="",this._timeZone=0,this._time=null,this.checkTime=function(t){var i=new Date;if(this._time.getTime()<i.getTime()+6e4*i.getTimezoneOffset()){for(i=0;i<this._days.length;i++)this._days[i].value(0);for(i=0;i<this._hours.length;i++)this._hours[i].value(0);for(i=0;i<this._minutes.length;i++)this._minutes[i].value(0);for(i=0;i<this._seconds.length;i++)this._seconds[i].value(0);return this.stop(),this.onFinish(),!0}var s=this.timeFormat(this._time.getTime()-(i.getTime()+6e4*i.getTimezoneOffset()),this._days.length,this._hours.length,this._minutes.length,this._seconds.length).split("");if(!isNaN(this._time)){for(i=0;i<this._days.length;i++){var e=parseInt(s.shift(),10);e!=this._days[i].value()&&this._days[i].value(e,t)}for(i=0;i<this._hours.length;i++)e=parseInt(s.shift(),10),e!=this._hours[i].value()&&this._hours[i].value(e,t);for(i=0;i<this._minutes.length;i++)e=parseInt(s.shift(),10),e!=this._minutes[i].value()&&this._minutes[i].value(e,t);for(i=0;i<this._seconds.length;i++)e=parseInt(s.shift(),10),e!=this._seconds[i].value()&&this._seconds[i].value(e,t)}return!1},this.textFormat=function(t,i,s){for(t=t.toString();t.length<i;)t=s+t;return t.length>i&&(t=t.substr(t.length-i,i)),t},this.timeFormat=function(t,i,s,e,h){var t=Math.floor(t/1e3),a=t%60,n=Math.floor(t%3600/60),r=Math.floor(t%86400/3600);return this.textFormat(Math.floor(t/86400),i,"0")+this.textFormat(r,s,"0")+this.textFormat(n,e,"0")+this.textFormat(a,h,"0")},this.start=function(){this.stop();for(var t=0;t<this._days.length;t++)this._days[t].update();for(t=0;t<this._hours.length;t++)this._hours[t].update();for(t=0;t<this._minutes.length;t++)this._minutes[t].update();for(t=0;t<this._seconds.length;t++)this._seconds[t].update();if(!this.checkTime(!1)){var i=this;this._tickId=setInterval(function(){i.checkTime(!0)},this._tickDelay)}},this.stop=function(){for(var t=0;t<this._days.length;t++)this._days[t].stop();for(t=0;t<this._hours.length;t++)this._hours[t].stop();for(t=0;t<this._minutes.length;t++)this._minutes[t].stop();for(t=0;t<this._seconds.length;t++)this._seconds[t].stop();clearInterval(this._tickId)},this.onFinish=function(){},this.destroy=function(){for(var t=0;t<this._days.length;t++)this._days[t].destroy();for(t=0;t<this._hours.length;t++)this._hours[t].destroy();for(t=0;t<this._minutes.length;t++)this._minutes[t].destroy();for(t=0;t<this._seconds.length;t++)this._seconds[t].destroy();this._days=[],this._hours=[],this._minutes=[],this._seconds=[],this.stop()},this.items=function(t,i,s,e){this._days=t,this._hours=i,this._minutes=s,this._seconds=e},this.timeText=function(t){return void 0==t?this._timeText:(this._timeText=t,void this.time(this.timeText(),this.timeZone()))},this.timeZone=function(t){return void 0==t?this._timeZone:(this._timeZone=t,void this.time(this.timeText(),this.timeZone()))},this.time=function(t,i){this._timeText=t,this._timeZone=i;var s=this._timeText.split("/").join(" ").split(":").join(" ").split(" "),e=parseInt(s[0],10),h=parseInt(s[1],10)-1,a=parseInt(s[2],10),n=parseInt(s[3],10),r=parseInt(s[4],10)-60*this._timeZone,s=parseInt(s[5],10);this._time=new Date(e,h,a,n,r,s,0),this.start()}},a=function(){return r.data("countdown")},n=function(){void 0!=a()&&(a().destroy(),r.removeData("countdown"))};if(0<arguments.length){var r=this,o=a();if(1==arguments.length&&"object"==typeof arguments[0]){void 0!=o&&(n(),r.children().remove());var l=arguments[0];void 0==a()?(o=new h,r.data("countdown",o),o=a()):o=void 0;var d=parseInt(jQuery.browser.version,10),h="string"==typeof l.timeText?l.timeText:"",n=parseFloat(l.timeZone);isNaN(n)&&(n=0);var c="string"==typeof l.style?l.style.toLowerCase():"";switch(c){case"flip":break;case"slide":break;case"crystal":break;case"metal":break;default:c="flip"}var u="string"==typeof l.color?l.color.toLowerCase():"";switch(u){case"black":break;case"white":break;default:u="black"}var f=parseInt(l.width,10);10<=f||(f=0);var v=parseInt(l.textGroupSpace,10);0<=v||(v=15);var _=parseInt(l.textSpace,10);0<_||(_=0);var m=0!=l.reflection,p=parseFloat(l.reflectionOpacity);0<p?100<p&&(p=100):p=10;var g=parseInt(l.reflectionBlur,10);0<g?10<g&&(g=10):g=0;var y,I=2<parseInt(l.dayTextNumber,10)?parseInt(l.dayTextNumber,10):2,F=0!=l.displayDay,w=0!=l.displayHour,x=0!=l.displayMinute,b=0!=l.displaySecond,k=0!=l.displayLabel,l="function"==typeof l.onFinish?l.onFinish:function(){},T="",j="";if(y='<div class="jCountdown">',F){for(y+='<div class="group day'+(w||x||b?"":" lastItem")+'">',F=0;F<I;F++)T=" item"+(F+1),j=F==I-1?" lastItem":"",y+='<div class="container'+T+j+'">',"slide"!=c&&"crystal"!=c&&"metal"!=c||(y+='<div class="cover"></div>'),y+='<div class="text"></div>',y+="</div>";k&&(y+='<div class="label"></div>'),y+="</div>"}if(w){for(y+='<div class="group hour'+(x||b?"":" lastItem")+'">',F=0;2>F;F++)T=" item"+(F+1),j=1==F?" lastItem":"",y+='<div class="container'+T+j+'">',"slide"!=c&&"crystal"!=c&&"metal"!=c||(y+='<div class="cover"></div>'),y+='<div class="text"></div>',y+="</div>";k&&(y+='<div class="label"></div>'),y+="</div>"}if(x){for(y+='<div class="group minute'+(b?"":" lastItem")+'">',F=0;2>F;F++)T=" item"+(F+1),j=1==F?" lastItem":"",y+='<div class="container'+T+j+'">',"slide"!=c&&"crystal"!=c&&"metal"!=c||(y+='<div class="cover"></div>'),y+='<div class="text"></div>',y+="</div>";k&&(y+='<div class="label"></div>'),y+="</div>"}if(b){for(y+='<div class="group second lastItem">',F=0;2>F;F++)T=" item"+(F+1),j=1==F?" lastItem":"",y+='<div class="container'+T+j+'">',"slide"!=c&&"crystal"!=c&&"metal"!=c||(y+='<div class="cover"></div>'),y+='<div class="text"></div>',y+="</div>";k&&(y+='<div class="label"></div>'),y+="</div>"}switch(r.html(y+"</div>"),I=r.children(".jCountdown"),I.addClass(c),I.addClass(u),I.children(".group").css("margin-right",v+"px"),I.children(".group.lastItem").css("margin-right","0px"),I.children(".group").children(".container").css("margin-right",_+"px"),I.children(".group").children(".container.lastItem").css("margin-right","0px"),m&&!(jQuery.browser.msie&&10>d)&&(reflectionObject=I.clone(),reflectionObject.addClass("reflection"),k&&reflectionObject.addClass("displayLabel"),100!=p&&reflectionObject.css("opacity",p/100),0!=g&&reflectionObject.addClass("blur"+g),I=I.add(reflectionObject)),T=jQuery('<div class="jCountdownContainer"></div>'),T.append(I),r.append(T),0!=f&&(u=jQuery('<div class="jCountdownScale"></div>'),u.append(I),T.append(u),v=u.width(),_=u.height(),f/=v,m=-(1-f)*v/2,p=-(1-f)*_/2,g="scale("+f+")",T.width(v*f),T.height(_*f),jQuery.browser.msie&&8>=d?u.css("zoom",f):(u.css("transform",g).css("-moz-transform",g).css("-webkit-transform",g).css("-o-transform",g).css("-ms-transform",g),u.css("left",m).css("top",p))),d="",f=0,u=[],v=[],_=[],m=[],T=function(){},c){case"flip":T=t;break;case"slide":T=i;break;case"crystal":T=e;break;case"metal":T=s}for(f=1,d=".group.day>.container.item";I.find(d+f).length;)u.push(new T(I.find(d+f))),f++;for(f=1,d=".group.hour>.container.item";I.find(d+f).length;)v.push(new T(I.find(d+f))),f++;for(f=1,d=".group.minute>.container.item";I.find(d+f).length;)_.push(new T(I.find(d+f))),f++;for(f=1,d=".group.second>.container.item";I.find(d+f).length;)m.push(new T(I.find(d+f))),f++;o.items(u,v,_,m),o.onFinish=l,o.time(h,n)}else if("string"==typeof arguments[0]&&void 0!=o)switch(arguments[0]){case"stop":o.stop();break;case"start":o.start();break;case"destroy":n(),r.children().remove()}}return this}});