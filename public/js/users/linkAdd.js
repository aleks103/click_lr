function toggleOptions(e){var a=$("#"+e+"_div");if("pop_up"===e||"magick_bar"===e||"timer"===e){var t=$("#cloak_div");t.is(":hidden")&&a.is(":hidden")&&(t.toggle(),$("#cloak_div_link").toggle())}else if("max_clicks"===e||"smart_swap"===e||"geotargeting"===e){var i=$("#backup_url_div");i.is(":hidden")&&a.is(":hidden")&&(i.toggle(),$("#backup_url_div_link").toggle())}if(!a.is(":hidden")){if("cloak"===e)$("#cloak_link_yes").prop("checked",!1),$("#cloak_link_no").prop("checked",!0),$("#cloak_page_title").val(""),$("#cloak_page_description").val(""),displayCloakDetails("No"),$("label[for='cloak_link'].error").text(""),$("label[for='cloak_page_title'].error").text(""),$("label[for='cloak_page_description'].error").text("");else if("front_end"===e)$("#front_end_yes").prop("checked",!1),$("#front_end_no").prop("checked",!0),$("#conversions_to_this_link_yes").prop("checked",!0),$("#conversions_to_this_link_no").prop("checked",!1),$("label[for='front_end'].error").text(""),$("label[for='conversions_to_this_link'].error").text("");else if("pop_up"===e){var r=$("#popup_id");r.val("0").prop("selected",!0),r.parent().find("span:first").text("None"),$("label[for='popup_id'].error").text("")}else if("magick_bar"===e){var l=$("#magickbar_id");l.val("0").prop("selected",!0),l.parent().find("span:first").text("None"),$("label[for='magickbar_id'].error").text("")}else if("timer"===e){var o=$("#timer_id");o.val("0").prop("selected",!0),o.parent().find("span:first").text("None"),$("label[for='timer_id'].error").text("")}else if("smart_swap"===e){var n=$("#smartswap_id");n.val("0").prop("selected",!0),n.parent().find("span:first").text("None"),$("label[for='smartswap_id'].error").text("")}else if("geotargeting"===e)$("#geo_targeting_all").prop("checked",!0),$("#geo_targeting_apecified").prop("checked",!1),displayCountries("All"),$("label[for='geo_targeting'].error").text(""),$("label[for='geo_targeting_include_countries'].error").text(""),$("label[for='geo_targeting_exclude_countries'].error").text("");else if("repeat_url"===e)$("#tracking_link_visited").prop("checked",!1);else if("pixel_code"===e)$("#create_dynamic_link").prop("checked",!1);else if("bad_clicks"===e){var u=$("#abuser");u.val("0").prop("selected",!0),u.parent().find("div:eq( 0 )").find("span:first").text("Filter");var d=$("#anon");d.val("0").prop("selected",!0),d.parent().find("div:eq( 1 )").find("span:first").text("Filter");var c=$("#bot");c.val("0").prop("selected",!0),c.parent().find("div:eq( 2 )").find("span:first").text("Filter");var s=$("#spider");s.val("0").prop("selected",!0),s.parent().find("div:eq( 3 )").find("span:first").text("Filter");var p=$("#server");p.val("0").prop("selected",!0),p.parent().find("div:eq( 4 )").find("span:first").text("Filter");var _=$("#user");_.val("0").prop("selected",!0),_.parent().find("div:eq( 5 )").find("span:first").text("Filter")}else"detect_bots"===e&&$("#detect_new_bots").prop("checked",!1);$("#"+e).val(""),$("label[for='"+e+"'].error").text("")}a.toggle(),$("#"+e+"_div_link").toggle();var g=a.offset();$("html,body").animate({scrollTop:g.top-75,scrollLeft:g.left})}function toggleOptionsLoad(e){if("pop_up"===e||"magick_bar"===e||"timer"===e){var a=$("#cloak_div");a.is(":hidden")&&(a.toggle(),$("#cloak_div_link").toggle())}else if("max_clicks"===e||"geotargeting"===e||"smart_swap"===e){var t=$("#backup_url_div");t.is(":hidden")&&(t.toggle(),$("#backup_url_div_link").toggle())}var i=$("#"+e+"_div");i.is(":hidden")&&(i.toggle(),$("#"+e+"_div_link").toggle())}function displayCloakDetails(e){"Yes"===e?$(".fn_cloak_det").show():($("#cloak_page_title").val(""),$("#cloak_page_description").val(""),$("label[for='cloak_link'].error").text(""),$("label[for='cloak_page_title'].error").text(""),$("label[for='cloak_page_description'].error").text(""),$(".fn_cloak_det").hide())}function displayCountries(e){var a=$("#geo_targeting_include_countries"),t=$("#geo_targeting_exclude_countries");"All"===e?(a.parent().find("ul:first li:not(:last)").remove(),a.val(null).trigger("change"),t.parent().find("ul:first li:not(:last)").remove(),t.val(null).trigger("change"),a.prop("disabled","disabled"),t.prop("disabled","disabled")):(a.prop("disabled",!1),t.prop("disabled",!1))}function generateDynamicCode(){$("#create_dynamic_link").is(":checked")?$("#affiliate_div").show():$("#affiliate_div").hide()}function addDynamicCode(){var e=$("#affiliate_link").val();if(""===e)$("#create_dynamic_link_error").html("Enter your affiliate link to add code");else{$("#create_dynamic_link_error").html("");var a='<img height="1" width="1" src="'+e+'">';$("#pixel_code").val(a)}}function injectTrim(e){return function(a,t){return("TEXTAREA"===a.tagName||"INPUT"===a.tagName&&"password"!==a.type)&&(a.value=$.trim(a.value)),e.call(this,a,t)}}!function(e){e(function(){e('[data-toggle="tooltip"]').tooltip(),e("#link_group_id, #popup_id, #magickbar_id, #smartswap_id, #timer_id").select2({placeholder:"~~ Select ~~"});var a=e("#geo_include").val(),t=[];""!==a&&(t=a.split(",")),e("#geo_targeting_include_countries").val(t).select2({placeholder:"~~ Select ~~",multiple:!0});var i=e("#geo_exclude").val(),r=[];""!==i&&(r=i.split(",")),e("#geo_targeting_exclude_countries").val(r).select2({placeholder:"~~ Select ~~",multiple:!0});var l=e("input[name='geo_targeting']:checked").val();displayCountries(l);var o=e("input[name='cloak_link']:checked").val();displayCloakDetails(o);for(var n in fields){var u=e("#"+fields[n]);if("pop_up"===n||"magick_bar"===n||"timer"===n||"smart_swap"===n)"smart_swap"===n?"0"!==u.val()&&toggleOptionsLoad(n):u.val()>0&&toggleOptionsLoad(n);else if("cloak"===n)"Yes"===o&&toggleOptionsLoad(n);else if("front_end"===n){var d=e("input[name='front_end']:checked").val();"Yes"===d&&toggleOptionsLoad(n)}else if("traffic_cost"===n)""!==u.val()&&u.val()>0&&toggleOptionsLoad(n);else if("geotargeting"===n)"All"!==l&&toggleOptionsLoad(n);else if("detect_bots"===n){var c=e("input[name='detect_new_bots']:checked").val();"Yes"===c&&toggleOptionsLoad(n)}else if("bad_clicks"===n){var s=e("#abuser").val(),p=e("#anon").val(),_=e("#bot").val(),g=e("#spider").val(),k=e("#server").val(),F=e("#user").val();"Filter"===s&&"Filter"===p&&"Filter"===_&&"Filter"===g&&"Filter"===k&&"Filter"===F||toggleOptionsLoad(n)}else"max_clicks"===n?""!==u.val()&&u.val()>0&&toggleOptionsLoad(n):""!==u.val()&&toggleOptionsLoad(n)}var f="Required",v="",m="",h=function(){return v},$=function(){return m};e.validator.addMethod("linkRegex",function(e,a){return this.optional(a)||/^[a-z0-9\-]+$/i.test(e)},"Tracking link must contain only letters, numbers and hyphens."),e.validator.addMethod("notEqualTo",function(a,t,i){var r=e(i);return a?e.trim(a)!==r.val():this.optional(t)},"Backup URL can't be the same as your Primary URL."),e.validator.addMethod("cloakRequired",function(a,t){return!(""!==a&&a>0&&"No"===e("input[name='cloak_link']:checked").val())},"To use a Pop Up you must cloak your link."),e.validator.addMethod("chkBackUrlRequired",function(a,t,i){var r=e(i),l=r.attr("id");if(""===e("#backup_url").val()){if("max_clicks"===l&&""!==r.val()&&r.val()>0)return v="You must enter a valid Backup URL to set Max Clicks",!1;if("geo_targeting_include_countries"===l||"geo_targeting_exclude_countries"===l){var o=e("input[name='geo_targeting']:checked").val();if("Specified"===o)return v="You must enter a valid Backup URL to set Geo Targeting",!1}if("smartswap_id"===l&&"0"!==r.val())return v="You must enter a valid Backup URL to use SmartSwap",!1}return!0},h),e.validator.addMethod("chkIncludeOrExcludeRequired",function(a,t){var i=e("input[name='geo_targeting']:checked").val();return"Specified"!==i||""!==a||null!==e("#geo_targeting_include_countries").val()||null!==e("#geo_targeting_exclude_countries").val()},"For geotargeting you need to select 1 or more countries."),e.validator.addMethod("chkPixelCode",function(e,a){if(""!==e){var t=new RegExp("\\<"),i=new RegExp("\\>");if(!t.test(e)||!i.test(e))return!1}return!0},"You did not enter a valid Pixel code or HTML."),e.validator.addMethod("chkTrackingLink",function(a,t,i){var r=e(i),l=r.attr("id"),o=!0;return""===e("#tracking_link").val()||(e("#tracking_domain > option").each(function(){var t=this.text+"/"+e("#tracking_link").val(),i=t.replace("go/","track/");t!==a&&i!==a||(o=!1)}),o||("primary_url"===l?m="Primary URL should not be same as Tracking Link":"backup_url"===l?m="Backup URL should not be same as Tracking Link":"mobile_url"===l?m="Mobile URL should not be same as Tracking Link":"repeat_url"===l&&(m="Repeat URL should not be same as Tracking Link")),o)},$),e.validator.addMethod("complete_url",function(a,t,i){return 0===a.length||(!/^(https?|ftp):\/\//i.test(a)&&a.length>7&&(a="http://"+a,e(t).val(a)),/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a))},e.validator.messages.url),e("#linkFrm").validate({onfocusout:injectTrim(e.validator.defaults.onfocusout),onkeyup:function(a){var t=e(a).attr("id");this.settings.rules[t].onkeyup!==!1&&e.validator.defaults.onkeyup.apply(this,arguments)},rules:{link_name:{minlength:4,maxlength:255},tracking_link:{required:!0,minlength:4,maxlength:255,linkRegex:!0},primary_url:{required:!0,complete_url:!0,chkTrackingLink:"#primary_url",onkeyup:!1},cloak_page_title:{onkeyup:!1},cloak_page_description:{onkeyup:!1},max_clicks:{chkBackUrlRequired:"#max_clicks",digits:!0},smartswap_id:{chkBackUrlRequired:"#smartswap_id"},traffic_cost:{number:!0},"geo_targeting_include_countries[]":{chkIncludeOrExcludeRequired:!0,chkBackUrlRequired:"#geo_targeting_include_countries"},"geo_targeting_exclude_countries[]":{chkIncludeOrExcludeRequired:!0,chkBackUrlRequired:"#geo_targeting_exclude_countries"},backup_url:{notEqualTo:"#primary_url",complete_url:!0,chkTrackingLink:"#backup_url",onkeyup:!1},repeat_url:{notEqualTo:"#primary_url",complete_url:!0,chkTrackingLink:"#repeat_url",onkeyup:!1},mobile_url:{notEqualTo:"#primary_url",complete_url:!0,chkTrackingLink:"#mobile_url",onkeyup:!1},popup_id:{cloakRequired:!0},magickbar_id:{cloakRequired:!0},timer_id:{cloakRequired:!0},pixel_code:{chkPixelCode:!0},notes:{onkeyup:!1}},messages:{tracking_link:{required:f},primary_url:{required:f},max_clicks:{digits:"Max Clicks must be a number"},smartswap_id:{chkBackUrlRequired:"You must enter a valid Backup URL to use SmartSwap"},backup_url:{notEqualTo:"Backup URL can't be the same as your Primary URL."},repeat_url:{notEqualTo:"Repeat URL can't be the same as your Primary URL."},mobile_url:{notEqualTo:"Mobile URL can't be the same as your Primary URL."},popup_id:{cloakRequired:"To use a Pop Up you must cloak your link."},magickbar_id:{cloakRequired:"To use a Pop Bar you must cloak your link."},timer_id:{cloakRequired:"To use a Timer you must cloak your link."}}})})}(jQuery);