function toggleOptions(e){var t=$("#"+e+"_div");if(!t.is(":hidden")){if("pop_up"===e){var a=$("#popup_id");a.val("0").prop("selected",!0),a.parent().find("span:first").text("None"),$("label[for='popup_id'].error").text("")}else if("magick_bar"===e){var o=$("#magickbar_id");o.val("0").prop("selected",!0),o.parent().find("span:first").text("None"),$("label[for='magickbar_id'].error").text("")}else if("timer"===e){var r=$("#timer_id");r.val("0").prop("selected",!0),r.parent().find("span:first").text("None"),$("label[for='timer_id'].error").text("")}else if("randomize"===e)$("#ignore_last_url").prop("checked",!1);else if("geotargeting"===e)$("#geo_targeting_all").prop("checked",!0),$("#geo_targeting_apecified").prop("checked",!1),displayCountries("0"),$("label[for='geo_targeting'].error").text(""),$("label[for='geo_targeting_include_countries'].error").text(""),$("label[for='geo_targeting_exclude_countries'].error").text("");else if("bad_clicks"===e){var i=$("#abuser");i.val("0").prop("selected",!0),i.parent().find("div:eq( 0 )").find("span:first").text("Filter");var l=$("#anon");l.val("0").prop("selected",!0),l.parent().find("div:eq( 1 )").find("span:first").text("Filter");var u=$("#bot");u.val("0").prop("selected",!0),u.parent().find("div:eq( 2 )").find("span:first").text("Filter");var d=$("#spider");d.val("0").prop("selected",!0),d.parent().find("div:eq( 3 )").find("span:first").text("Filter");var n=$("#server");n.val("0").prop("selected",!0),n.parent().find("div:eq( 4 )").find("span:first").text("Filter");var s=$("#user");s.val("0").prop("selected",!0),s.parent().find("div:eq( 5 )").find("span:first").text("Filter")}else"detect_bots"===e&&$("#detect_new_bots").prop("checked",!1);$("#"+e).val(""),$("label[for='"+e+"'].error").text("")}t.toggle(),$("#"+e+"_div_link").toggle();var p=t.offset();$("html,body").animate({scrollTop:p.top-75,scrollLeft:p.left})}function toggleFields(e){$("."+e).toggle()}function toggleOptionsLoad(e){$("#"+e+"_div").toggle(),$("#"+e+"_div_link").toggle()}function displayCloakDetails(e){"1"===e?$(".fn_cloak_det").show():($("#cloak_page_title").val(""),$("#cloak_page_description").val(""),$("label[for='cloak_link'].error").text(""),$("label[for='cloak_page_title'].error").text(""),$("label[for='cloak_page_description'].error").text(""),$(".fn_cloak_det").hide())}function displayCountries(e){var t=$("#geo_targeting_include_countries"),a=$("#geo_targeting_exclude_countries");"0"===e?(t.parent().find("ul:first li:not(:last)").remove(),t.val(null).trigger("change"),a.parent().find("ul:first li:not(:last)").remove(),a.val(null).trigger("change"),t.prop("disabled","disabled"),a.prop("disabled","disabled")):(t.prop("disabled",!1),a.prop("disabled",!1))}function injectTrim(e){return function(t,a){return("TEXTAREA"===t.tagName||"INPUT"===t.tagName&&"password"!==t.type)&&(t.value=$.trim(t.value)),e.call(this,t,a)}}function displayRotatorMode(e){"1"===e?$(".fn_rotator_det").show():$(".fn_rotator_det").hide()}!function(e){e(function(){e('[data-toggle="tooltip"]').tooltip(),e("#link_group_id, #popup_id, #magickbar_id, #timer_id").select2({placeholder:"~~ Select ~~"});var t=e("#geo_include").val(),a=[];""!==t&&(a=t.split(",")),e("#geo_targeting_include_countries").val(a).select2({placeholder:"~~ Select ~~",multiple:!0});var o=e("#geo_exclude").val(),r=[];""!==o&&(r=o.split(",")),e("#geo_targeting_exclude_countries").val(r).select2({placeholder:"~~ Select ~~",multiple:!0});var i=e("input[name='geo_targeting']:checked").val();displayCountries(i);var l=e("input[name='cloak_rotator']:checked").val();displayCloakDetails(l);var u=e("input[name='rotator_mode']:checked").val();displayRotatorMode(u);for(var d in fields){var n=e("#"+fields[d]);if("pop_up"===d||"magick_bar"===d||"timer"===d)n.val()>0&&toggleOptionsLoad(d);else if("geotargeting"===d)"0"!==i&&toggleOptionsLoad(d);else if("detect_bots"===d){var s=e("input[name='detect_new_bots']:checked").val();"Yes"===s&&toggleOptionsLoad(d)}else if("bad_clicks"===d){var p=e("#abuser").val(),c=e("#anon").val(),F=e("#bot").val(),g=e("#spider").val(),_=e("#server").val(),v=e("#user").val();"0"===p&&"0"===c&&"0"===F&&"0"===g&&"0"===_&&"0"===v||toggleOptionsLoad(d)}else if("cookie_duration"===d)""!==n.val()&&n.val()>0&&toggleOptionsLoad(d);else if("randomize"===d){var f=e("input[name='ignore_last_url']:checked").val();(""!==n.val()&&n.val()>0||"1"===f)&&toggleOptionsLoad(d)}else""!==n.val()&&toggleOptionsLoad(d)}var k="Required",m="",h="",b=function(){return m};e.validator.addMethod("rotatorRegex",function(e,t){return this.optional(t)||/^[a-z0-9\-]+$/i.test(e)},"Rotator link must contain only letters, numbers and hyphens."),e.validator.addMethod("cloakRequired",function(t,a){return!(""!==t&&t>0&&"0"===e("input[name='cloak_rotator']:checked").val())},"To use a Pop Up you must cloak your rotator."),e.validator.addMethod("chkIncludeOrExcludeRequired",function(t,a){var o=e("input[name='geo_targeting']:checked").val();return"1"!==o||""!==t||null!==e("#geo_targeting_include_countries").val()||null!==e("#geo_targeting_exclude_countries").val()},"For geotargeting you need to select 1 or more countries."),e.validator.addMethod("chkPixelCode",function(e,t){if(""!==e){var a=new RegExp("\\<"),o=new RegExp("\\>");if(!a.test(e)||!o.test(e))return!1}return!0},"You did not enter a valid Pixel code or HTML."),e.validator.addMethod("chkRotatorLink",function(t,a,o){var r=e(o),i=r.attr("id"),l=!0;return""===e("#tracking_link").val()||(e("#tracking_domain > option").each(function(){var a=this.text+"/"+e("#rotator_link").val();a===t&&(l=!1)}),l||("backup_url"===i?h="Backup URL should not be same as Rotator Link":"mobile_url"===i&&(h="Mobile URL should not be same as Rotator Link")),l)},b),e.validator.addMethod("complete_url",function(t,a,o){return 0===t.length||(!/^(https?|ftp):\/\//i.test(t)&&t.length>7&&(t="http://"+t,e(a).val(t)),/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t))},e.validator.messages.url),e("#rotatorFrm").validate({onfocusout:injectTrim(e.validator.defaults.onfocusout),onkeyup:function(t){var a=e(t).attr("id");this.settings.rules[a].onkeyup!==!1&&e.validator.defaults.onkeyup.apply(this,arguments)},rules:{rotator_name:{minlength:4,maxlength:255},rotator_link:{required:!0,minlength:4,maxlength:255,rotatorRegex:!0},"geo_targeting_include_countries[]":{chkIncludeOrExcludeRequired:!0},"geo_targeting_exclude_countries[]":{chkIncludeOrExcludeRequired:!0},backup_url:{notEqualTo:"#primary_url",complete_url:!0,chkRotatorLink:"#backup_url",onkeyup:!1},mobile_url:{notEqualTo:"#primary_url",complete_url:!0,chkRotatorLink:"#mobile_url",onkeyup:!1},cloak_page_title:{onkeyup:!1},cloak_page_description:{onkeyup:!1},popup_id:{cloakRequired:!0},magickbar_id:{cloakRequired:!0},timer_id:{cloakRequired:!0},cookie_duration:{digits:!0},randomize:{digits:!0},pixel_code:{chkPixelCode:!0},notes:{onkeyup:!1}},messages:{rotator_link:{required:k},backup_url:{required:k},popup_id:{cloakRequired:"To use a Pop Up you must cloak your rotator."},magickbar_id:{cloakRequired:"To use a Pop Bar you must cloak your rotator."},timer_id:{cloakRequired:"To use a Timer you must cloak your rotator."},cookie_duration:{digits:"Cookie duration must be a number"},randomize:{digits:"Cookie duration must be a number"}}})})}(jQuery);